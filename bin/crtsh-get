#!/bin/sh
# usage: crtsh-get [domain...]
#
# fetches certificate transparency records for a domain from crt.sh
set -euo pipefail

if [ "$#" -eq "0" ]; then
  >&2 echo "error: no domains specified"
  exit 1
fi

for domain in $@; do
  >&2 echo "fetching $domain"
  https crt.sh output==json q=="$domain" | jq > $domain.json
done
